// 用户反馈数据管理
export const userFeedbackData = {
  '494725605': [ // 上海迪士尼
    {
      id: 1,
      user: {
        name: '李女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '无障碍体验官',
      },
      rating: 5,
      date: '2023-06-20',
      helpful: 28,
      location: '奇幻童话城堡',
      content: '无障碍设施非常完善，轮椅可以到达城堡的每一层，工作人员服务也很贴心！',
      images: [
        'https://images.unsplash.com/photo-1559127452-e9ba11e8f684?w=200&h=150&fit=crop',
      ],
      tags: ['轮椅友好', '服务优秀', '设施完善'],
      accessibility: {
        wheelchair: 5,
        visual: 4,
        hearing: 4,
        cognitive: 5,
      },
      status: '好评',
    },
    {
      id: 2,
      user: {
        name: '王先生',
        avatar: '',
        disability: '视力障碍',
        badge: '资深游客',
      },
      rating: 4,
      date: '2023-06-15',
      helpful: 15,
      location: '明日世界',
      content: '语音导览系统很完善，但希望能增加更多触觉体验项目。',
      images: [],
      tags: ['语音导览', '盲文友好', '服务贴心'],
      accessibility: {
        wheelchair: 4,
        visual: 5,
        hearing: 3,
        cognitive: 4,
      },
      status: '好评',
    },
  ],
  '462007561': [ // 上海动物园
    {
      id: 1,
      user: {
        name: '张女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '无障碍体验官',
      },
      rating: 5,
      date: '2023-06-15',
      helpful: 32,
      location: '大熊猫馆',
      content: '无障碍设施非常完善，轮椅可以直接到达观景台，工作人员也很热心帮助，孩子们玩得很开心！',
      images: [
        'https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=200&h=150&fit=crop',
      ],
      tags: ['轮椅友好', '服务优秀', '亲子友好'],
      accessibility: {
        wheelchair: 5,
        visual: 4,
        hearing: 4,
        cognitive: 5,
      },
      status: '好评',
    },
    {
      id: 2,
      user: {
        name: '刘先生',
        avatar: '',
        disability: '听力障碍',
        badge: '常客',
      },
      rating: 4,
      date: '2023-06-10',
      helpful: 18,
      location: '海洋动物区',
      content: '动物表演很精彩，但希望能提供手语翻译服务。',
      images: [],
      tags: ['表演精彩', '需要手语', '环境优美'],
      accessibility: {
        wheelchair: 4,
        visual: 4,
        hearing: 2,
        cognitive: 4,
      },
      status: '处理中',
    },
  ],
  '39961770': [ // 复兴公园
    {
      id: 1,
      user: {
        name: '王先生',
        avatar: '',
        disability: '轮椅使用者',
        badge: '常客',
      },
      rating: 3,
      date: '2023-05-10',
      helpful: 12,
      location: '玫瑰园',
      content: '公园环境很好，但部分小径是石子路，轮椅通行不太方便，希望能改善。',
      images: [],
      tags: ['环境优美', '路面待改善', '历史悠久'],
      accessibility: {
        wheelchair: 3,
        visual: 4,
        hearing: 4,
        cognitive: 4,
      },
      status: '处理中',
    },
    {
      id: 2,
      user: {
        name: '陈女士',
        avatar: '',
        disability: '无',
        badge: '摄影爱好者',
      },
      rating: 5,
      date: '2023-06-08',
      helpful: 25,
      location: '法式花园',
      content: '法式园林设计很精美，春季玫瑰盛开时特别美丽，适合拍照留念。',
      images: [
        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop',
      ],
      tags: ['法式风格', '拍照圣地', '花卉美丽'],
      accessibility: {
        wheelchair: 4,
        visual: 5,
        hearing: 4,
        cognitive: 4,
      },
      status: '好评',
    },
  ],
  '45220427': [ // 中山公园
    {
      id: 1,
      user: {
        name: '陈女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '樱花爱好者',
      },
      rating: 4,
      date: '2023-04-15',
      helpful: 22,
      location: '樱花大道',
      content: '樱花季节非常美丽，主要道路轮椅通行没问题，但希望增加更多休息座椅。',
      images: [
        'https://images.unsplash.com/photo-1522383225653-ed111181a951?w=200&h=150&fit=crop',
      ],
      tags: ['樱花美丽', '轮椅友好', '需要座椅'],
      accessibility: {
        wheelchair: 4,
        visual: 4,
        hearing: 4,
        cognitive: 4,
      },
      status: '好评',
    },
  ],
  '39176862': [ // 共青森林公园
    {
      id: 1,
      user: {
        name: '李先生',
        avatar: '',
        disability: '轮椅使用者',
        badge: '自然爱好者',
      },
      rating: 4,
      date: '2023-05-25',
      helpful: 16,
      location: '森林步道',
      content: '公园自然环境很好，主要步道可以通行，但希望能增加更多无障碍设施。',
      images: [],
      tags: ['自然环境', '空气清新', '设施待完善'],
      accessibility: {
        wheelchair: 3,
        visual: 4,
        hearing: 4,
        cognitive: 4,
      },
      status: '处理中',
    },
  ],
  '178411796': [ // 黄浦公园
    {
      id: 1,
      user: {
        name: '赵女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '外滩常客',
      },
      rating: 5,
      date: '2023-06-01',
      helpful: 30,
      location: '江边观景台',
      content: '观景台视野很好，可以看到外滩全景，轮椅通行没有问题。',
      images: [
        'https://images.unsplash.com/photo-1548919973-5cef591cdbc9?w=200&h=150&fit=crop',
      ],
      tags: ['视野开阔', '轮椅友好', '外滩美景'],
      accessibility: {
        wheelchair: 5,
        visual: 5,
        hearing: 4,
        cognitive: 4,
      },
      status: '好评',
    },
  ],
  '47005216': [ // 上海植物园
    {
      id: 1,
      user: {
        name: '孙女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '植物爱好者',
      },
      rating: 5,
      date: '2023-04-20',
      helpful: 24,
      location: '温室植物区',
      content: '温室内的无障碍设施很完善，电梯运行正常，可以看到很多热带植物。',
      images: [
        'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=200&h=150&fit=crop',
      ],
      tags: ['温室精美', '电梯便利', '植物丰富'],
      accessibility: {
        wheelchair: 5,
        visual: 4,
        hearing: 4,
        cognitive: 5,
      },
      status: '好评',
    },
  ],
  '40036584': [ // 豫园
    {
      id: 1,
      user: {
        name: '马先生',
        avatar: '',
        disability: '轮椅使用者',
        badge: '文化爱好者',
      },
      rating: 3,
      date: '2023-05-15',
      helpful: 14,
      location: '园区道路',
      content: '豫园很有历史韵味，但古建筑的台阶较多，轮椅通行比较困难，建议增加无障碍通道。',
      images: [],
      tags: ['历史悠久', '台阶较多', '需要改善'],
      accessibility: {
        wheelchair: 2,
        visual: 4,
        hearing: 4,
        cognitive: 4,
      },
      status: '处理中',
    },
  ],
  '666304555': [ // 大宁郁金香公园
    {
      id: 1,
      user: {
        name: '周女士',
        avatar: '',
        disability: '轮椅使用者',
        badge: '花卉爱好者',
      },
      rating: 5,
      date: '2023-04-10',
      helpful: 35,
      location: '郁金香花田',
      content: '春季的郁金香非常美丽，无障碍设施完善，轮椅可以到达所有观赏点。',
      images: [
        'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=200&h=150&fit=crop',
      ],
      tags: ['郁金香美丽', '全程无障碍', '春季必游'],
      accessibility: {
        wheelchair: 5,
        visual: 4,
        hearing: 4,
        cognitive: 5,
      },
      status: '好评',
    },
  ],
};

// 根据景点ID获取用户反馈
export const getUserFeedbackByScenicId = (scenicId) => {
  return userFeedbackData[scenicId] || [];
};

// 获取所有用户反馈
export const getAllUserFeedback = () => {
  return Object.values(userFeedbackData).flat();
};

// 根据用户类型筛选反馈
export const getUserFeedbackByDisability = (scenicId, disability) => {
  const feedbacks = getUserFeedbackByScenicId(scenicId);
  return feedbacks.filter(feedback => 
    feedback.user.disability === disability || disability === 'all'
  );
};

// 获取景点平均评分
export const getAverageRating = (scenicId) => {
  const feedbacks = getUserFeedbackByScenicId(scenicId);
  if (feedbacks.length === 0) return 0;
  
  const totalRating = feedbacks.reduce((sum, feedback) => sum + feedback.rating, 0);
  return (totalRating / feedbacks.length).toFixed(1);
};

// 获取无障碍评分统计
export const getAccessibilityStats = (scenicId) => {
  const feedbacks = getUserFeedbackByScenicId(scenicId);
  if (feedbacks.length === 0) {
    return {
      wheelchair: 0,
      visual: 0,
      hearing: 0,
      cognitive: 0,
    };
  }
  
  const stats = feedbacks.reduce((acc, feedback) => {
    acc.wheelchair += feedback.accessibility.wheelchair;
    acc.visual += feedback.accessibility.visual;
    acc.hearing += feedback.accessibility.hearing;
    acc.cognitive += feedback.accessibility.cognitive;
    return acc;
  }, { wheelchair: 0, visual: 0, hearing: 0, cognitive: 0 });
  
  const count = feedbacks.length;
  return {
    wheelchair: (stats.wheelchair / count).toFixed(1),
    visual: (stats.visual / count).toFixed(1),
    hearing: (stats.hearing / count).toFixed(1),
    cognitive: (stats.cognitive / count).toFixed(1),
  };
};